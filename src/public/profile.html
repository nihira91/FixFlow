
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Profile | FixFlow IMS</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- Tailwind -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            primary: "#00b7a8",
            secondary: "#009fbe",
          }
        }
      }
    }
  </script>

  <style>
    @keyframes floatSlow {
      0%,100% { transform: translateY(0); }
      50% { transform: translateY(-14px); }
    }
    .float { animation: floatSlow 8s ease-in-out infinite; }
  </style>
</head>

<body class="relative overflow-hidden bg-gradient-to-br from-teal-50 via-cyan-50 to-white min-h-screen">

  <!-- BACKGROUND SVGs -->
  <svg class="absolute -top-24 -left-24 w-[420px] opacity-30 float" viewBox="0 0 600 600">
    <path fill="#00b7a8"
      d="M300,520Q190,520 120,430Q50,340 90,230Q130,120 250,90Q370,60 460,150Q550,240 510,350Q470,460 300,520Z"/>
  </svg>

  <svg class="absolute bottom-0 right-0 w-[460px] opacity-20 float" viewBox="0 0 600 600">
    <path fill="#009fbe"
      d="M300,540Q160,520 100,420Q40,320 100,210Q160,100 300,100Q440,100 500,210Q560,320 500,420Q440,520 300,540Z"/>
  </svg>

  <main class="relative max-w-6xl mx-auto p-8 z-10">

    <div class="flex items-center justify-between mb-8">
      <div class="flex items-center gap-4">
        <a href="index.html" class="px-3 py-2 bg-white/80 text-primary rounded-lg hover:bg-white transition flex items-center gap-2 shadow">
          üè† Home
        </a>
        <button id="backBtn" class="px-3 py-2 bg-white/80 text-primary rounded-lg hover:bg-white transition flex items-center gap-2 shadow">
          ‚Üê Back
        </button>
        <h1 class="text-4xl font-bold text-primary">
          My Profile & Reports
        </h1>
      </div>
    </div>

    <!-- üë§ PROFILE CARD -->
    <section
      class="bg-white/80 backdrop-blur-xl rounded-3xl shadow-xl p-8 mb-10
             grid grid-cols-1 md:grid-cols-3 gap-6 hover:shadow-2xl transition">

      <!-- AVATAR + UPLOAD -->
      <div class="flex flex-col items-center justify-center">
        <div class="relative group">
          <!-- Avatar -->
          <div
            class="w-28 h-28 rounded-full bg-gradient-to-br from-primary to-secondary
                   flex items-center justify-center text-white text-4xl font-bold">
            A
          </div>

          <!-- Upload overlay (UI only) -->
          <label
            class="absolute inset-0 rounded-full bg-black/40 text-white
                   flex items-center justify-center text-sm font-medium
                   opacity-0 group-hover:opacity-100 cursor-pointer transition">
            Change
            <input type="file" accept="image/*" class="hidden" />
          </label>

          <span class="absolute inset-0 rounded-full border-4 border-teal-300 animate-pulse"></span>
        </div>

        <p id="userName" class="mt-4 text-xl font-semibold text-gray-800"></p>
      </div>

      <!-- DETAILS -->
      <div class="flex flex-col justify-center space-y-4">

        <!-- EMAIL -->
        <div>
          <p class="text-gray-500 text-sm">Email</p>
          <p class="text-base font-medium text-gray-800" id="userEmail"></p>
        </div>

        <!-- ROLE -->
        <div>
          <p class="text-gray-500 text-sm">Role</p>
          <p class="text-xl font-semibold text-gray-800" id="userRole"></p>
        </div>
      </div>

      <!-- STATUS -->
      <div class="flex flex-col justify-center">
        <p class="text-gray-500 text-sm">Account Status</p>
        <span
          class="inline-block mt-2 px-4 py-1 text-sm rounded-full
                 bg-green-100 text-green-700 w-fit">
          ‚óè Active
        </span>
      </div>

    </section>

    <!-- üìä ANALYTICS -->
    <section class="grid grid-cols-1 md:grid-cols-2 gap-8">

      <!-- STATS -->
      <div
        class="bg-white/80 backdrop-blur-xl rounded-3xl shadow-xl p-6
               hover:shadow-2xl transition">

        <h3 class="text-lg font-semibold mb-6 text-gray-800">
          Issue Summary
        </h3>

        <div class="grid grid-cols-2 gap-6 text-center">

          <div
            class="p-6 rounded-2xl bg-gradient-to-br from-yellow-50 to-yellow-100
                   hover:scale-105 transition">
            <p class="text-sm text-gray-500">Pending</p>
            <p id="pendingCount" class="text-4xl font-bold text-yellow-500">0</p>
          </div>

          <div
            class="p-6 rounded-2xl bg-gradient-to-br from-green-50 to-green-100
                   hover:scale-105 transition">
            <p class="text-sm text-gray-500">Resolved</p>
            <p id="resolvedCount" class="text-4xl font-bold text-green-600">0</p>
          </div>

        </div>
      </div>

      <!-- PIE CHART -->
      <div
        class="bg-white/80 backdrop-blur-xl rounded-3xl shadow-xl p-6
               hover:shadow-2xl transition">

        <h3 class="text-lg font-semibold mb-4 text-gray-800">
          Issues Distribution
        </h3>

        <canvas id="issueChart" height="260"></canvas>
      </div>

    </section>

  </main>

  <script>
    // Back to Dashboard functionality
    document.getElementById("backBtn").addEventListener("click", () => {
      const user = JSON.parse(localStorage.getItem("user") || "{}");
      if (user.role === "technician") {
        window.location.href = "Technician.html";
      } else {
        window.location.href = "Employee.html";
      }
    });
  </script>

  <!-- JS (UNCHANGED) -->
  <script src="empv1.js"></script>
</body>
</html>
